<%- include('partials/header', { title: title, loggedIn: loggedIn }) %>

<section class="edit-item-page">
  <div class="form-card">

    <h2>Edit Item</h2>

    <form action="/item/<%= item.itemID %>/edit" method="POST" enctype="multipart/form-data">

      <label for="itemName">Item Name</label>
      <input
        type="text"
        id="itemName"
        name="itemName"
        value="<%= item.itemName %>"
        required
      />

      <label for="itemDesc">Description</label>
      <textarea
        id="itemDesc"
        name="itemDesc"
        rows="4"
        required
      ><%= item.itemDesc %></textarea>

      <label for="category">Category</label>
      <select id="category" name="category">
        <option value="furniture" <%= item.category === 'furniture' ? 'selected' : '' %>>Furniture</option>
        <option value="jewelry" <%= item.category === 'jewelry' ? 'selected' : '' %>>Jewelry</option>
        <option value="keepsakes" <%= item.category === 'keepsakes' ? 'selected' : '' %>>Keepsakes</option>
        <option value="books" <%= item.category === 'books' ? 'selected' : '' %>>Books & Letters</option>
      </select>

      <label>Current Image</label>
      <% if (item.itemImagePath) { %>
        <img src="<%= item.itemImagePath %>" alt="Current item image" class="edit-item-preview" />
      <% } else { %>
        <p>No image uploaded.</p>
      <% } %>

      <label for="image">Upload New Image (optional)</label>
      <input type="file" id="image" name="image" />

      <button type="submit" class="btn btn-primary">Save Changes</button>

    </form>

    <a href="/market" class="btn btn-secondary">Cancel</a>

  </div>
</section>

<%- include('partials/footer') %>