<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Market | Grandma’s Legacy</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>

  <!-- Header -->
  <header class="site-header">
    <div class="logo"><h2>Grandma’s Legacy</h2></div>
    <nav class="nav-menu">
      <a href="/">Home</a>
      <a href="/market">All Items</a>
      <a href="/account">My Account</a>
    </nav>
    <div class="login-button">
      <% if (loggedIn) { %>
        <a href="/logout" class="button small">Logout</a>
      <% } else { %>
        <a href="/login" class="button small">Login</a>
      <% } %>
    </div>
  </header>

  <!-- Items -->
  <section class="market">
    <h1><%= category || "All" %> Items</h1>
    <p>Choose an item to claim or view details.</p>

    <div class="item-grid">
      <% if (items && items.length > 0) { %>
        <% items.forEach(item => { %>
          <div class="item-card <%= item.claimedBy ? 'claimed-item' : '' %>">
            <img src="<%= item.image || '/images/default.jpg' %>" alt="<%= item.name %>" />
            <h3><%= item.name %></h3>
            <p><%= item.desc %></p>
            <p class="claimed-status">
              <% if (item.claimedBy) { %>
                <span class="claimed">Claimed by <%= item.claimedBy %></span>
              <% } else { %>
                <form action="/claim/<%= item.id %>" method="POST">
                  <button type="submit" class="button small">Claim Item</button>
                </form>
              <% } %>
            </p>
          </div>
        <% }) %>
      <% } else { %>
        <p class="no-items">No items found in this category.</p>
      <% } %>
    </div>
  </section>

  <footer>
    <p>Made with love by the family • © <%= new Date().getFullYear() %> Grandma’s Legacy</p>
  </footer>

</body>
</html>
